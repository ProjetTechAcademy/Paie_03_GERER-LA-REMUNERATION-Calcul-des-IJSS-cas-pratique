<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>03_G√âRER LES HS & DIMANCHE / r√®gles 2025 / cas pratique</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Inter',sans-serif;background:#F8F7F4;color:#3D405B}
    .nav-link{transition:all .3s;border-bottom:2px solid transparent}
    .nav-link:hover,.nav-link.active{color:#81B29A;border-bottom-color:#81B29A}
    .card{background:#fff;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.05);transition:transform .3s, box-shadow .3s}
    .card:hover{transform:translateY(-5px);box-shadow:0 10px 15px rgba(0,0,0,.07)}
    input,select{border-color:#E0E0E0}
    input:focus,select:focus{border-color:#81B29A;box-shadow:0 0 0 2px rgba(129,178,154,.3);outline:none}
    .table-header{background:#F3F4F6}
  </style>
</head>
<body class="antialiased">
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <span class="font-bold text-lg text-gray-800">03_G√âRER LES HEURES SUP & DIMANCHE</span>
        </div>
        <div class="hidden md:block">
          <div class="ml-10 flex items-baseline space-x-4">
            <a href="#processus" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Processus</a>
            <a href="#regles" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">R√®gles 2025</a>
            <a href="#simulateur" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Simulateur</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <div class="text-center mb-12">
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight text-gray-900">Heures suppl√©mentaires & travail du dimanche</h1>
      <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Un parcours p√©dagogique + un calculateur interactif, cal√©s sur l‚Äôactualit√© r√©glementaire 2025 (France)¬†: d√©compte hebdo, majorations, exon√©rations salariales (11,31¬†%), d√©duction patronale, non-imposition jusqu‚Äô√† 7‚ÄØ500¬†‚Ç¨ et r√®gles ¬´¬†dimanche¬†¬ª par convention.</p>
    </div>

    <!-- 1. Processus -->
    <section id="processus" class="mb-16 scroll-mt-20">
      <div class="card p-6 md:p-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">üîÅ Le Processus de d√©compte</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
          <div class="p-4 bg-blue-100 rounded-lg border border-blue-200">
            <p class="font-bold text-blue-800 text-5xl">1</p>
            <h3 class="font-semibold text-blue-800 mt-2">Semaine civile</h3>
            <p class="text-sm text-blue-700 mt-2">Les HS se d√©comptent par semaine (lun¬†0h¬†‚Üí¬†dim¬†24h, sauf accord). Le constat se fait <strong>√† la fin</strong> de la semaine, y compris si elle chevauche 2 mois.</p>
          </div>
          <div class="p-4 bg-yellow-100 rounded-lg border border-yellow-200">
            <p class="font-bold text-yellow-800 text-5xl">2</p>
            <h3 class="font-semibold text-yellow-800 mt-2">Taux de majoration</h3>
            <p class="text-sm text-yellow-700 mt-2">Par d√©faut¬†: +25¬†% de la 36e √† la 43e heure (8¬†HS), puis +50¬†% au-del√†. Un accord/CCN peut pr√©voir d‚Äôautres taux.</p>
          </div>
          <div class="p-4 bg-green-100 rounded-lg border border-green-200">
            <p class="font-bold text-green-800 text-5xl">3</p>
            <h3 class="font-semibold text-green-800 mt-2">Dimanche</h3>
            <p class="text-sm text-green-700 mt-2">Pas de prime l√©gale syst√©matique¬†: tout d√©pend de la CCN / accord / usage. Certaines pr√©voient +100¬†% et repos compensateur.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 2. R√®gles 2025 -->
    <section id="regles" class="mb-16 scroll-mt-20">
      <div class="card p-6 md:p-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">üìú R√®gles sociales & fiscales 2025 (synth√®se)</h2>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="p-4 rounded-lg border bg-white">
            <h3 class="font-semibold">Exon√©ration salariale (HS/HC)</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 mt-2">
              <li>R√©duction de cotisations salariales sur HS/HC dans la limite de <strong>11,31¬†%</strong>.</li>
              <li>Applicable sur la r√©mun√©ration + majorations (dans la limite des taux l√©gaux ou conventionnels).</li>
            </ul>
          </div>
          <div class="p-4 rounded-lg border bg-white">
            <h3 class="font-semibold">D√©duction patronale (HS)</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 mt-2">
              <li><strong>&lt; 20</strong> salari√©s¬†: <strong>1,50¬†‚Ç¨</strong> par HS.</li>
              <li><strong>20 √† 249</strong>¬†salari√©s¬†: <strong>0,50¬†‚Ç¨</strong> par HS.</li>
            </ul>
          </div>
          <div class="p-4 rounded-lg border bg-white">
            <h3 class="font-semibold">Imp√¥t sur le revenu</h3>
            <ul class="list-disc list-inside text-sm text-gray-700 mt-2">
              <li>HS exon√©r√©es d‚ÄôIR <strong>jusqu‚Äô√† 7‚ÄØ500¬†‚Ç¨ nets</strong>/an (d√©clar√©es quand m√™me).</li>
            </ul>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
          <div>
            <h4 class="font-semibold text-lg">Quelles primes compter pour majorer les HS¬†?</h4>
            <p class="text-sm text-gray-700 mt-2">Inclure les √©l√©ments li√©s √† l‚Äôex√©cution/conditions du travail (ex¬†: prime de rendement individuel/collectif contributive, prime de dimanche/jours f√©ri√©s, nuit, insalubrit√©‚Ä¶). Exclure les √©l√©ments d√©connect√©s (13e¬†mois, fin d‚Äôann√©e, transport/panier remboursements, √©v√®nements familiaux‚Ä¶).</p>
          </div>
          <div>
            <h4 class="font-semibold text-lg">Travail du dimanche¬†: points de vigilance</h4>
            <p class="text-sm text-gray-700 mt-2">D√©rogations sectorielles/g√©ographiques, volontariat selon cas, repos compensateur √©ventuel, non-cumul ou cumul des majorations (HS √ó Dimanche) selon CCN/jurisprudence.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 3. Simulateur -->
    <section id="simulateur" class="mb-16 scroll-mt-20">
      <div class="card p-6 md:p-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">üñ•Ô∏è Simulateur Heures Sup & Dimanche (2025)</h2>

        <!-- 3.1 Param√®tres entreprise & salari√© -->
        <div class="bg-gray-50 p-6 rounded-lg border mb-8">
          <h3 class="text-xl font-semibold mb-4 text-gray-700">1. Param√®tres</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700">Effectif entreprise</label>
              <select id="effectif" class="mt-1 block w-full rounded-md p-2">
                <option value="-20">&lt; 20</option>
                <option value="20-249">20 √† 249</option>
                <option value=">=250">‚â• 250 (pas de d√©duction patronale)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">Salaire de base mensuel (‚Ç¨)</label>
              <input id="salaireBase" type="number" step="0.01" value="2500" class="mt-1 block w-full rounded-md p-2">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">Heures de base mensuelles</label>
              <input id="heuresBaseMensuelles" type="number" value="151.67" class="mt-1 block w-full rounded-md p-2">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">Primes √† inclure base HS (‚Ç¨)</label>
              <input id="primesIncluses" type="number" step="0.01" value="0" class="mt-1 block w-full rounded-md p-2">
            </div>
            <div class="lg:col-span-2">
              <label class="block text-sm font-medium text-gray-700">R√®gle dimanche (CCN)</label>
              <select id="regleDimanche" class="mt-1 block w-full rounded-md p-2">
                <option value="aucune">G√©n√©rique (pas de prime l√©gale)</option>
                <option value="+100">CCN avec majoration 100¬†% (ex¬†: N√©goce Ameublement)</option>
                <option value="syntec100">SYNTEC¬†: +100¬†% (travail exceptionnel du dimanche) + HS √©ventuellement cumulables</option>
                <option value="noncumul90">CCN non-cumul (appliquer la majoration la plus favorable)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">Cumul HS √ó Dimanche</label>
              <select id="cumul" class="mt-1 block w-full rounded-md p-2">
                <option value="non">Non (prendre la majoration la plus favorable)</option>
                <option value="oui">Oui (additionner)</option>
              </select>
            </div>
            <div class="flex items-end">
              <label class="flex items-center text-sm">
                <input id="reposComp" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600"> 
                <span class="ml-2">Repos comp. dimanche (si CCN le pr√©voit)</span>
              </label>
            </div>
          </div>
        </div>

        <!-- 3.2 Saisie hebdomadaire -->
        <div class="bg-gray-50 p-6 rounded-lg border mb-8">
          <h3 class="text-xl font-semibold mb-4 text-gray-700">2. Heures r√©alis√©es (4 semaines type)</h3>
          <div id="semaines" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
          <p class="text-xs text-gray-500 mt-4">üí° Les HS se d√©comptent <strong>par semaine</strong>. Le simulateur applique +25¬†% jusqu‚Äô√† 8¬†HS (36e‚Üí43e h) puis +50¬†% au-del√†, sauf si vos r√®gles/CCN diff√®rent.</p>
        </div>

        <!-- 3.3 R√©sultats -->
        <div>
          <h3 class="text-xl font-semibold mb-4 text-gray-700">3. R√©sultats & bulletin simplifi√©</h3>
          <div id="resultats" class="space-y-6"></div>
        </div>
      </div>
    </section>
  </main>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const inputs = {
      effectif: document.getElementById('effectif'),
      salaireBase: document.getElementById('salaireBase'),
      heuresBaseMensuelles: document.getElementById('heuresBaseMensuelles'),
      primesIncluses: document.getElementById('primesIncluses'),
      regleDimanche: document.getElementById('regleDimanche'),
      cumul: document.getElementById('cumul'),
      reposComp: document.getElementById('reposComp')
    };

    // Constantes 2025 v√©rifi√©es (SMIC utile pour rep√®res uniquement)
    const SMIC_HORAIRE_2025 = 11.88; // Insee 2025
    const REDUCTION_SALARIALE_MAX = 0.1131; // plafond 11,31%
    const DEDUC_PATRONALE_LT20 = 1.50; // ‚Ç¨/HS
    const DEDUC_PATRONALE_20_249 = 0.50; // ‚Ç¨/HS

    // Construction des 4 semaines de saisie
    const semainesDiv = document.getElementById('semaines');
    const semaines = [];
    for (let s = 1; s <= 4; s++) {
      const wrap = document.createElement('div');
      wrap.className = 'card p-4';
      wrap.innerHTML = `
        <h4 class="font-semibold text-gray-800 mb-3">Semaine ${s}</h4>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-gray-700">Heures totales r√©alis√©es</label>
            <input data-k="heures" type="number" step="0.01" value="35" class="mt-1 block w-full rounded-md p-2">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Dont le dimanche</label>
            <input data-k="dimanche" type="number" step="0.01" value="0" class="mt-1 block w-full rounded-md p-2">
          </div>
        </div>`;
      semainesDiv.appendChild(wrap);
      const heures = wrap.querySelector('input[data-k="heures"]');
      const dimanche = wrap.querySelector('input[data-k="dimanche"]');
      semaines.push({ heures, dimanche });
    }

    const resultatsDiv = document.getElementById('resultats');

    // Listeners
    Object.values(inputs).forEach(el => el.addEventListener('input', recalc));
    semaines.forEach(s => {
      s.heures.addEventListener('input', recalc);
      s.dimanche.addEventListener('input', recalc);
    });

    function arr2(n){return Math.round(n*100)/100}

    function recalc(){
      const salaireBase = parseFloat(inputs.salaireBase.value||0);
      const heuresBaseMensuelles = parseFloat(inputs.heuresBaseMensuelles.value||151.67);
      const primes = parseFloat(inputs.primesIncluses.value||0);
      const tauxHoraireBase = (salaireBase + primes) / heuresBaseMensuelles;

      const effectifVal = inputs.effectif.value;
      const regleDim = inputs.regleDimanche.value;
      const cumul = inputs.cumul.value === 'oui';

      // D√©duction patronale par HS selon effectif
      const deducPatronaleParHS = effectifVal === '-20' ? DEDUC_PATRONALE_LT20 : (effectifVal === '20-249' ? DEDUC_PATRONALE_20_249 : 0);

      // Boucle semaines => calc HS par semaine
      let totalHS25 = 0, totalHS50 = 0, totalDimHeures = 0;
      let remunerationDimanche = 0; // hors HS, prime dimanche/CCN

      semaines.forEach(({heures, dimanche}) => {
        const h = parseFloat(heures.value||0);
        const d = parseFloat(dimanche.value||0);
        const hebdoBase = 35; // suppos√©; adapter si accord diff√©rent
        const hsSemaine = Math.max(0, h - hebdoBase);
        const hs25 = Math.min(8, hsSemaine);
        const hs50 = Math.max(0, hsSemaine - 8);
        totalHS25 += hs25; totalHS50 += hs50; totalDimHeures += d;

        // R√®gle dimanche (hors HS) => si cumul=false on prendra le mieux plus loin
        let primeDimanche = 0;
        if (regleDim === '+100' || regleDim === 'syntec100') {
          primeDimanche = d * tauxHoraireBase; // +100% => doublement => prime = base en plus
        } else if (regleDim === 'aucune' || regleDim === 'noncumul90') {
          primeDimanche = 0; // g√©n√©rique
        }
        remunerationDimanche += primeDimanche;
      });

      // Heures sup r√©mun√©ration et majorations
      const baseHS = tauxHoraireBase; // inclus primes s√©lectionn√©es
      const remunHS25 = totalHS25 * baseHS * 1.25;
      const remunHS50 = totalHS50 * baseHS * 1.50;
      const majHS = (totalHS25 * baseHS * 0.25) + (totalHS50 * baseHS * 0.50);
      const remunHSBrut = remunHS25 + remunHS50; // base+majorations

      // Dimanche vs HS : gestion du cumul
      // Si pas de cumul et CCN pr√©voit majoration dimanche, on compare pour les heures faites un dimanche ET heures sup
      // Approche simple : appliquer non-cumul en rempla√ßant, pour min(totalDimHeures, totalHS), la majoration HS par la majoration dimanche si elle est sup√©rieure.
      let ajustementNonCumul = 0;
      if (!cumul && (inputs.regleDimanche.value === '+100' || inputs.regleDimanche.value === 'noncumul90')) {
        const totalHS = totalHS25 + totalHS50;
        const chevauchement = Math.min(totalDimHeures, totalHS);
        const majorationDim = baseHS; // +100% => prime = 100% du taux (en plus du salaire de base)
        // Majorations HS moyennes pond√©r√©es sur chevauchement : approx en prenant 25% sur les 8 premi√®res puis 50%
        const majChev25 = Math.min(chevauchement, totalHS25) * baseHS * 0.25;
        const majChev50 = Math.max(0, chevauchement - totalHS25) * baseHS * 0.50;
        const majHSsurChev = majChev25 + majChev50;
        // Si la majoration dimanche est plus favorable, on remplace la majoration HS par celle de dimanche sur les heures qui se chevauchent
        ajustementNonCumul = Math.max(0, (chevauchement * majorationDim) - majHSsurChev);
      }

      // R√©mun√©ration brute
      const salaireBrutBase = salaireBase;
      const brutHS = remunHSBrut; // comprend base des HS
      const brutDimanche = remunerationDimanche; // prime dim. hors HS (ou ajust√©e via non-cumul)
      const brutTotal = salaireBrutBase + brutHS + brutDimanche + ajustementNonCumul;

      // R√©duction salariale HS (11,31% max) ‚Äì n‚Äôagit que sur la partie HS/HC (r√©mun√©ration et majoration dans la limite)
      const assietteRedSalHS = remunHSBrut + (cumul ? remunerationDimanche : (remunerationDimanche + ajustementNonCumul));
      const reducSalariale = assietteRedSalHS * REDUCTION_SALARIALE_MAX;

      // D√©duction forfaitaire patronale
      const nbHS = totalHS25 + totalHS50;
      const deducPatronale = nbHS * deducPatronaleParHS;

      // Net (approche p√©dagogique) : on applique 22% de charges salariales sur le brut, puis on retranche la r√©duction salariale calcul√©e
      const netAvantHS = salaireBrutBase * 0.78; // approx 22%
      const netHS = (brutHS + brutDimanche + ajustementNonCumul) * 0.78;
      const netApresReduc = netAvantHS + netHS + reducSalariale; // la r√©duction augmente le net

      // Sortie
      resultatsDiv.innerHTML = '';

      const blocSynthese = `
        <div class="p-4 rounded-lg border bg-gray-100">
          <h4 class="font-bold text-lg text-indigo-700 mb-4">Synth√®se mois (p√©dagogique)</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <table class="min-w-full bg-white border text-sm">
                <tbody>
                  <tr class="border-b"><td class="py-1 px-2">Taux horaire de base (avec primes incluses)</td><td class="text-right py-1 px-2">${arr2(baseHS).toFixed(2)} ‚Ç¨</td></tr>
                  <tr class="border-b"><td class="py-1 px-2">HS √† 25¬†%</td><td class="text-right py-1 px-2">${totalHS25} h</td></tr>
                  <tr class="border-b"><td class="py-1 px-2">HS √† 50¬†%</td><td class="text-right py-1 px-2">${totalHS50} h</td></tr>
                  <tr class="border-b"><td class="py-1 px-2">Heures travaill√©es le dimanche</td><td class="text-right py-1 px-2">${arr2(totalDimHeures)} h</td></tr>
                </tbody>
              </table>
            </div>
            <div>
              <table class="min-w-full bg-white border text-sm">
                <tbody>
                  <tr class="border-b"><td class="py-1 px-2">R√©mun√©ration HS (base + maj.)</td><td class="text-right py-1 px-2">${arr2(brutHS).toFixed(2)} ‚Ç¨</td></tr>
                  <tr class="border-b"><td class="py-1 px-2">Prime dimanche</td><td class="text-right py-1 px-2">${arr2(brutDimanche).toFixed(2)} ‚Ç¨</td></tr>
                  ${!cumul && (inputs.regleDimanche.value === '+100' || inputs.regleDimanche.value === 'noncumul90') ? `<tr class="border-b"><td class="py-1 px-2">Ajustement non-cumul (plus favorable)</td><td class="text-right py-1 px-2">${arr2(ajustementNonCumul).toFixed(2)} ‚Ç¨</td></tr>`:''}
                  <tr class="border-b font-semibold"><td class="py-1 px-2">Brut total</td><td class="text-right py-1 px-2">${arr2(brutTotal).toFixed(2)} ‚Ç¨</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>`;

      const blocBulletin = `
        <div class="p-4 rounded-lg border bg-white">
          <h5 class="font-semibold text-gray-800 mb-2">üßæ Bulletin simplifi√©</h5>
          <table class="min-w-full bg-white border text-sm">
            <tbody>
              <tr class="border-b"><td class="py-1 px-2">Salaire de base</td><td class="text-right py-1 px-2">${arr2(salaireBrutBase).toFixed(2)} ‚Ç¨</td></tr>
              <tr class="border-b"><td class="py-1 px-2">Heures sup 25¬†%</td><td class="text-right py-1 px-2">${arr2(totalHS25*baseHS*1.25).toFixed(2)} ‚Ç¨</td></tr>
              <tr class="border-b"><td class="py-1 px-2">Heures sup 50¬†%</td><td class="text-right py-1 px-2">${arr2(totalHS50*baseHS*1.50).toFixed(2)} ‚Ç¨</td></tr>
              <tr class="border-b"><td class="py-1 px-2">Prime dimanche</td><td class="text-right py-1 px-2">${arr2(brutDimanche).toFixed(2)} ‚Ç¨</td></tr>
              ${!cumul && (inputs.regleDimanche.value === '+100' || inputs.regleDimanche.value === 'noncumul90') ? `<tr class="border-b"><td class="py-1 px-2">Ajustement non-cumul</td><td class="text-right py-1 px-2">${arr2(ajustementNonCumul).toFixed(2)} ‚Ç¨</td></tr>`:''}
              <tr class="bg-gray-200 font-bold"><td class="py-1 px-2">Brut soumis</td><td class="text-right py-1 px-2">${arr2(brutTotal).toFixed(2)} ‚Ç¨</td></tr>
              <tr><td class="py-1 px-2 text-xs italic text-gray-500" colspan="2">‚Ä¶ Cotisations salariales (‚âà22¬†%) ‚Ä¶</td></tr>
              <tr class="border-t"><td class="py-1 px-2">R√©duction salariale HS (max 11,31¬†%)</td><td class="text-right py-1 px-2">+${arr2(reducSalariale).toFixed(2)} ‚Ç¨</td></tr>
              <tr class="border-t font-medium"><td class="py-1 px-2">Net √† payer (approx.)</td><td class="text-right py-1 px-2">${arr2(netApresReduc).toFixed(2)} ‚Ç¨</td></tr>
            </tbody>
          </table>
        </div>`;

      const blocCotisations = `
        <div class="p-4 rounded-lg border bg-blue-50 border-blue-200">
          <h5 class="font-semibold text-blue-800 mb-2">üíº C√¥t√© employeur</h5>
          <p class="text-sm text-blue-900">D√©duction forfaitaire patronale estim√©e¬†: <strong>${nbHS}</strong> HS √ó ${deducPatronaleParHS.toFixed(2)}¬†‚Ç¨ = <strong>${arr2(deducPatronale).toFixed(2)}¬†‚Ç¨</strong>.</p>
          ${inputs.reposComp.checked ? '<p class="text-xs text-blue-900 mt-1">Repos compensateur dimanche¬†: √† organiser selon la CCN/accord (affichage non chiffr√©).</p>' : ''}
        </div>`;

      resultatsDiv.innerHTML = blocSynthese + blocBulletin + blocCotisations;
    }

    recalc();
  });
  </script>
</body>
</html>
